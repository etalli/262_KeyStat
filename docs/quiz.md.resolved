# KeyLens 理解度確認テスト

このテストは、KeyLens プロジェクトのコード構造や設計意図をどの程度理解できているかを確認するためのものです。

## 第1部：基本構成とアーキテクチャ

**Q1. KeyLens のアーキテクチャは大きく3つのレイヤーで構成されています。それらは何ですか？**
(ヒント: [Architecture.md](file:///Users/k2/Library/CloudStorage/Dropbox/MyProjects/262_KeyLens/Architecture.md) に記載されています)

**Q2. アプリケーションの起動時、`main.swift` で設定されている「Dock にアイコンを表示せず、メニューバーアプリとして動作させるための設定」は何ですか？**

**Q3. キー入力イベントを OS レベルでキャッチするために使用されている技術（API）は何ですか？**

---

## 第2部：実装の詳細と設計判断

**Q4. [KeyboardMonitor.swift](file:///Users/k2/Library/CloudStorage/Dropbox/MyProjects/262_KeyLens/Sources/KeyLens/KeyboardMonitor.swift) の `inputTapCallback` は、なぜクラスのメソッドではなく「グローバル関数」として定義されているのでしょうか？**
(ヒント: Swift のクロージャと C 言語の関数ポインタの制約に関係があります)

**Q5. `KeyCountStore` はシングルトンとして実装されていますが、`CGEventTap` のスレッドとメインスレッド（UI スレッド）からの同時アクセスによるデータの破損を防ぐために、どのような仕組みでスレッドセーフを実現していますか？**

**Q6. キー入力があるたびにディスク（`counts.json`）に書き込むのは非効率です。`KeyCountStore` では、書き込み頻度を抑えるためにどのような工夫をしていますか？**

---

## 第3部：データとUI

**Q7. 累計のキー入力回数などのデータは、Mac のどのディレクトリに保存されますか？**

**Q8. メニューバーのメニュー（本日の方、合計など）はどのタイミングで更新（再構築）されますか？**
- A) キーが押されるたびにリアルタイムで更新される
- B) ユーザーがメニューをクリックして開こうとした瞬間に更新される
- C) 1分ごとのタイマーで更新される

**Q9. キー入力が一定数（デフォルト 1000回）に達したときに通知を出す処理は、どのクラスが担当していますか？**

---

## 第4部：応用

**Q10. `KeyType.swift` は何のために存在し、どのように活用されていますか？**

---

回答の準備ができたら教えてください。答え合わせと解説を行います！
